(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(e,t,a){e.exports=a(99)},56:function(e,t,a){},77:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){e.exports=a.p+"static/media/avatar.a9ce03bb.png"},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),c=a.n(l),s=(a(56),a(2)),o=a(3),i=a(5),u=a(4),d=a(7),m=a(17),h=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("p",null,"DASHBOARD"))}}]),a}(n.Component),p=a(6),E=a.n(p),v="http://localhost:4000/",f=a(20),y=a.n(f),g=function(e){return r.a.createElement("tr",{onClick:function(){return console.log("".concat(e.key," is clicked"))}},r.a.createElement("td",null," ",e.item.strategy_name," "),r.a.createElement("td",null," ",r.a.createElement(y.a,{data:e.item.strategy_buy}),"} "),r.a.createElement("td",null," ",r.a.createElement(y.a,{data:e.item.strategy_sell}),"} "))},k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleBuyInputChange=function(e){n.setState({buyStrategy:e.target.value})},n.handleSellInputChange=function(e){n.setState({sellStrategy:e.target.value})},n.state={strategyList:[],error:"",buyStrategy:"",sellStrategy:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchStrategyList()}},{key:"render",value:function(){return this.renderStrategyList()}},{key:"fetchStrategyList",value:function(){var e=this;E.a.get("".concat(v,"strategy/")).then((function(t){e.setState({strategyList:t.data})})).catch((function(t){return e.setState({error:t})}))}},{key:"mapStrategyToList",value:function(){return this.state.strategyList.map((function(e,t){return r.a.createElement(g,{item:e,key:t})}))}},{key:"renderStrategyList",value:function(){return r.a.createElement("div",{id:"strategyList"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Buy Signal"),r.a.createElement("th",null,"Sell Signal"))),r.a.createElement("tbody",null,this.mapStrategyToList())))))}}]),a}(n.Component),S=a(33),b=a(16),N=a.n(b),C=a(23),O=(a(77),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFileChange=function(){var e=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files,n.props.preProcess(),n.toggleLoading(),n.readMultipleFiles(a),a.length>1?n.setFileName("Multiple CSV Files"):n.setFileName(a[0].name);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.toggleLoading=function(){n.setState({loading:!n.state.loading})},n.state={content:[],fileName:void 0,loading:!1},n.inputFileRef=r.a.createRef(),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"uploader"},r.a.createElement("div",{className:"stocks-list-uploader"},r.a.createElement("input",{id:"uploadFileInput",type:"file",ref:this.inputFileRef,onChange:this.handleFileChange,accept:".".concat(this.props.parseType),multiple:!0}),r.a.createElement("span",{id:"fileUploadLabel",onClick:function(){return e.openInputFile()}},this.state.fileName||this.props.label,this.state.loading&&this.renderSpinner()),this.props.actionLabel&&r.a.createElement("button",{className:"btn btn-primary",id:"uploadFileBtn",type:"button",onClick:this.props.onActionTriggered},this.props.actionLabel)))}},{key:"renderSpinner",value:function(){return r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement("div",{className:"loader"}))}},{key:"readMultipleFiles",value:function(){var e=Object(C.a)(N.a.mark((function e(t){var a,n,r,l,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(){return(s=Object(C.a)(N.a.mark((function e(t,a){var n,r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("\n"),r=[],l=["trade_date","open","high","low","close","volume"],n.map((function(e){var t={},n=e.split(",");t.code=a,l.map((function(e,a){t[e]=n[a]})),""!==t.code&&""!==t.trade_date&&r.push(t)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e,t){return s.apply(this,arguments)},l=function(){return(l=Object(C.a)(N.a.mark((function e(l){var s,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l>=t.length)){e.next=2;break}return e.abrupt("return");case 2:s=new FileReader,o=t[l],s.onload=function(e){var s=e.target.result;c(s,o.name.split(".")[0]).then((function(e){a=[].concat(Object(S.a)(a),Object(S.a)(e)),l>=t.length&&(n.props.onFileChange(a),n.toggleLoading())})),r(l+=1)},s.readAsText(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=[],n=this,(r=function(e){return l.apply(this,arguments)})(0);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openInputFile",value:function(){this.inputFileRef.current.click()}},{key:"setFileName",value:function(e){this.setState({fileName:e})}}]),a}(n.Component)),_=a(8),L=(a(78),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setFileName=function(e){n.setState({strategyName:e.target.value})},n.onBuyFileChange=function(e){n.setState({buyStrategy:e})},n.onSellFileChange=function(e){n.setState({sellStrategy:e})},n.saveStrategy=function(){var e={strategy_name:n.state.strategyName,strategy_buy:n.state.buyStrategy,strategy_sell:n.state.sellStrategy};E.a.post("http://localhost:4000/strategy/add",e).then((function(){console.log("Upload successful!")})).catch((function(){return console.log("Upload failed!")}))},n.state={strategyName:void 0,buyStrategy:void 0,sellStrategy:void 0},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"strategyAdd"},r.a.createElement("section",{id:"uploadForm"},this.renderFileNameInput(),this.renderBuySection(),this.renderSellSection()),r.a.createElement("section",{id:"strategyContent"},this.renderActionSection(),this.renderBuyContent(),this.renderSellContent()))}},{key:"renderFileNameInput",value:function(){return r.a.createElement("section",{className:"card upload-card"},r.a.createElement("h5",null,"Strategy name"),r.a.createElement("input",{type:"text",id:"strategyName",onChange:this.setFileName}))}},{key:"renderBuySection",value:function(){return r.a.createElement("section",{className:"card upload-card"},r.a.createElement("h5",null,"Buy"),r.a.createElement(O,{onFileChange:this.onBuyFileChange,label:"Choose buy strategy file",parseType:"json"}))}},{key:"renderSellSection",value:function(){return r.a.createElement("section",{className:"card upload-card"},r.a.createElement("h5",null,"Sell"),r.a.createElement(O,{onFileChange:this.onSellFileChange,label:"Choose sell strategy file",parseType:"json"}))}},{key:"renderActionSection",value:function(){return r.a.createElement("section",{id:"action"},r.a.createElement(_.a,{className:"form-btn",onClick:this.saveStrategy},"Save"),r.a.createElement(_.a,{className:"form-btn"},"Reset"))}},{key:"renderBuyContent",value:function(){return this.state.buyStrategy&&r.a.createElement("div",null,r.a.createElement("h5",null,"Buy Strategy"),r.a.createElement("section",{className:"card"},r.a.createElement(y.a,{data:this.state.buyStrategy})))}},{key:"renderSellContent",value:function(){return this.state.sellStrategy&&r.a.createElement("div",null,r.a.createElement("h5",null,"Sell Strategy"),r.a.createElement("section",{className:"card"},r.a.createElement(y.a,{data:this.state.sellStrategy})))}}]),a}(n.Component)),D=a(50),T=function(e){var t=e.children,a=Object(D.a)(e,["children"]);return r.a.createElement("li",Object.assign({className:"breadcrumb-item"},a),t)},j=function(e){var t=r.a.Children.toArray(e.children);return t=t.map((function(e,t){return r.a.createElement(T,{key:"breadcrumb_item".concat(t)},e)})),r.a.createElement("ol",{className:"breadcrumb"},t)},F=[{to:"/strategy/list",label:"Strategy List"},{to:"/strategy/add",label:"Add Strategy"}],B=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,null,this.renderRouteArea())}},{key:"renderRouteArea",value:function(){var e=this;return r.a.createElement("div",{id:"strategy"},r.a.createElement("div",{className:"header"},r.a.createElement("p",null,"STRATEGY")),r.a.createElement(j,null,F.map((function(e){var t=e.to,a=e.label;return r.a.createElement(d.b,{key:t,to:t},a)}))),r.a.createElement(m.b,{path:"/strategy"},r.a.createElement(m.a,{to:"/strategy/list"})),r.a.createElement(m.b,{path:"/strategy/list",exact:!0,component:k}),r.a.createElement(m.b,{path:"/strategy/add",exact:!0,render:function(t){return r.a.createElement(L,{callMe:e.sampleMethod})}}))}}]),a}(n.Component),w=a(14),R=a(49),A=a.n(R),P=(a(45),a(90),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={datePickerOpen:!1,selectedDay:void 0},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"trader-datepicker"},r.a.createElement("span",null,this.props.label),r.a.createElement("div",{id:"trader-datepicker-wrapper"},r.a.createElement(A.a,{onDayChange:this.props.onDayChange,dayPickerProps:{showWeekNumbers:!0,todayButton:"Today"}}),r.a.createElement("i",{className:"fa fa-calendar fa-fw"})))}}]),a}(n.Component)),x=a(22),M=a.n(x),H=(a(91),a(18)),U=a.n(H),Y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).searchStocks=function(){if(n.state.selectedStock){var e=n.state.selectedStock.value;n.setState({stocks:[]},(function(){E.a.post("http://localhost:4000/stocks/range",{dateFrom:n.state.fromDay,dateTo:n.state.toDay,code:e}).then((function(e){n.setState({stocks:e.data}),n.mapStockList()})).catch((function(){return n.setState({uploadFailed:!0})}))}))}},n.onFileChangeHandler=function(e){n.setState({stockList:e})},n.onSaveHandler=function(){E.a.post("http://localhost:4000/stocks/add",n.state.stockList).then((function(){n.setState({uploadSuccessful:!0,stocks:[]}),n.mapStockList()})).catch((function(){return n.setState({uploadFailed:!0})}))},n.handleFromDayChange=function(e){e&&(console.log("fromday",new Date(e).toISOString()),n.setState({fromDay:e}))},n.handleToDayChange=function(e){n.setState({toDay:e})},n.handleStockChange=n.handleStockChange.bind(Object(w.a)(n)),n.state={fromDay:void 0,toDay:void 0,error:"",selectedStock:void 0,stocks:[],stockList:[],uploadSuccessful:!1,uploadFailed:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.retrieveStocks()}},{key:"retrieveStocks",value:function(){var e=this;E.a.post("".concat(v,"stocks/distinct/")).then((function(t){return e.setState({stockList:t.data.map((function(e){return{label:e,value:e}}))})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("p",null,"STOCKS")),r.a.createElement("div",{className:"stockSearch"},r.a.createElement("div",{id:"uploadBtn"},r.a.createElement(d.b,{to:"/stocks/upload",className:"nav-normal"},r.a.createElement("i",{className:"fa fa-cloud","aria-hidden":"true"}),r.a.createElement("span",null,"Upload"))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"testRunnerFields"},this._renderSelectStock(),this._renderFromDatePicker(),this._renderToDatePicker(),r.a.createElement(_.a,{id:"slSearchBtn",onClick:function(){return e.searchStocks()}},"Search"),r.a.createElement(_.a,{id:"slResetBtn"},"Reset")))),0!==this.state.stocks.length&&r.a.createElement("div",{className:"table-responsive stock-list"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Code"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Open"),r.a.createElement("th",null,"High"),r.a.createElement("th",null,"Low"),r.a.createElement("th",null,"Close"),r.a.createElement("th",null,"Volume"))),r.a.createElement("tbody",null,this.mapStockList()))))}},{key:"mapStockList",value:function(){return this.state.stocks.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",e.code," "),r.a.createElement("td",null," ",U()(e.trade_date).format("MMM DD, YYYY")," "),r.a.createElement("td",null," ",e.open," "),r.a.createElement("td",null," ",e.high," "),r.a.createElement("td",null," ",e.low," "),r.a.createElement("td",null," ",e.close," "),r.a.createElement("td",null," ",e.volume," "))}))}},{key:"_renderSelectStock",value:function(){var e=this.state.selectedStock;return r.a.createElement("div",{id:"tsStockDd"},r.a.createElement("span",null,"Stock"),r.a.createElement("div",{className:"dropdown"},r.a.createElement(M.a,{onChange:this.handleStockChange,options:this.state.stockList,value:e})))}},{key:"handleStockChange",value:function(e){this.setState({selectedStock:e})}},{key:"_renderFromDatePicker",value:function(){return r.a.createElement(P,{label:"Date From",onDayChange:this.handleFromDayChange})}},{key:"_renderToDatePicker",value:function(){return r.a.createElement(P,{label:"Date To",onDayChange:this.handleToDayChange})}}]),a}(n.Component),I=a(34),K=Object.freeze({RESET:"RESET",STOCKS:"STOCKS",TOTAL_COUNT:"TOTAL COUNT",UPLOAD:"Upload",UPLOAD_STOCKS:"UPLOAD STOCKS"}),V=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).clearStockList=function(){n.setState({stocks:[]})},n.onSaveHandler=function(){n.toggleSavingState(),E.a.post("http://localhost:4000/stocks/add",n.state.stocks).then((function(){n.setState({uploadSuccessful:!0,stocks:[]}),n.mapStockList()})).catch((function(){return n.setState({uploadFailed:!0})})).finally((function(){return n.toggleSavingState()}))},n.onFileChangeHandler=function(e){n.setState({stocks:[]},(function(){n.setState({stocks:e.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{volume:parseFloat(e.volume)})}))})}))},n.toggleSavingState=function(){n.setState({saving:!n.state.saving})},n.state={stocks:[],saving:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement(d.b,{to:"/stocks/list",className:"nav-normal"},r.a.createElement("i",{className:"fa fa-chevron-circle-left","aria-hidden":"true"}),r.a.createElement("span",null," ",K.STOCKS)),r.a.createElement("p",null,K.UPLOAD_STOCKS)),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"upload-controls"},r.a.createElement("div",{className:"stocks-list-uploader"},r.a.createElement(O,{label:"Choose a file",preProcess:this.clearStockList,onFileChange:this.onFileChangeHandler,parseType:"csv"})),r.a.createElement(_.a,{id:"slSearchBtn",onClick:function(){return e.onSaveHandler()}},this.state.saving?this.renderLoadingButton():K.UPLOAD),r.a.createElement(_.a,{id:"slResetBtn"},"Reset"))),r.a.createElement("div",null,0!==this.state.stocks.length&&r.a.createElement("div",{className:"table-responsive stock-list"},K.TOTAL_COUNT," ",this.state.stocks.length,r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Code"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Open"),r.a.createElement("th",null,"High"),r.a.createElement("th",null,"Low"),r.a.createElement("th",null,"Close"),r.a.createElement("th",null,"Volume"))),r.a.createElement("tbody",null,this.mapStockList())))))}},{key:"renderLoadingButton",value:function(){return r.a.createElement("span",{className:"buttonLabel"},"Loading",r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement("div",{className:"loader"})))}},{key:"mapStockList",value:function(){return this.state.stocks.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",e.code," "),r.a.createElement("td",null," ",e.trade_date," "),r.a.createElement("td",null," ",e.open," "),r.a.createElement("td",null," ",e.high," "),r.a.createElement("td",null," ",e.low," "),r.a.createElement("td",null," ",e.close," "),r.a.createElement("td",null," ",e.volume," "))}))}}]),a}(n.Component),W=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,null,this.renderRouteArea())}},{key:"renderRouteArea",value:function(){return r.a.createElement("div",{id:"stocks"},r.a.createElement(m.b,{path:"/stocks"},r.a.createElement(m.a,{to:"/stocks/list"})),r.a.createElement(m.b,{path:"/stocks/list",exact:!0,component:Y}),r.a.createElement(m.b,{path:"/stocks/upload",exact:!0,component:V}))}}]),a}(n.Component),J=(a(93),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this))._processBacktest=function(){E.a.post("".concat(v,"stocks/range/"),{dateFrom:e.state.selectedFromDay,dateTo:e.state.selectedToDay}).then((function(t){t.data&&(console.log(t.data.length),e._runBacktest(t.data))})).catch((function(e){return console.error(e)}))},e._setSelectedStrategy=function(t){e.setState({selectedStrategy:t})},e._processBacktest=e._processBacktest.bind(Object(w.a)(e)),e.state={selectedStrategy:void 0,selectedStocks:void 0,strategies:[],result:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.retrieveStrategyList()}},{key:"render",value:function(){return r.a.createElement("div",{id:"backtest"},r.a.createElement("div",{className:"header"},r.a.createElement("p",null,"BACKTESTS")),r.a.createElement("div",{id:"backtestForm",className:"card"},this._renderSelectStock(),this._renderSelectStrategy(),this._renderSearchButton(),this._renderResetButton()),this._renderResultsTable())}},{key:"mapResultList",value:function(){return this.state.result.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",e.code," "),r.a.createElement("td",null," ",e.bought_date," "),r.a.createElement("td",null," ",e.bought_price," "),r.a.createElement("td",null," ",e.sold_date," "),r.a.createElement("td",null," ",e.sold_price," "),r.a.createElement("td",null," ",e.units," "),r.a.createElement("td",null," ",e.pnl," "))}))}},{key:"retrieveStrategyList",value:function(){var e=this;E.a.get("".concat(v,"strategy/")).then((function(t){return e.setState({strategies:t.data})})).catch((function(e){return console.log(e)}))}},{key:"_renderSelectStrategy",value:function(){var e=this;return r.a.createElement("div",{id:"btStratDd"},r.a.createElement("span",null,"Strategy"),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"strategyDropDown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.selectedStrategy?this.state.selectedStrategy.strategy_name:"ALL"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"strategyDropDown"},this.state.strategies.map((function(t,a){return r.a.createElement("a",{key:a,className:"dropdown-item",href:"#!",onClick:function(){return e._setSelectedStrategy(t)}},t.strategy_name)})))))}},{key:"_renderSelectStock",value:function(){var e=this;return r.a.createElement("div",{id:"btStockDd"},r.a.createElement("span",null,"Stock"),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"stockDropDown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.selectedStrategy?this.state.selectedStrategy.strategy_name:"ALL"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"strategyDropDown"},this.state.strategies.map((function(t,a){return r.a.createElement("a",{key:a,className:"dropdown-item",href:"#!",onClick:function(){return e._setSelectedStrategy(t)}},t.strategy_name)})))))}},{key:"_renderResultsTable",value:function(){return 0===this.state.result.length?r.a.createElement("h5",null,"No Result"):r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Code"),r.a.createElement("th",null,"Bought Date"),r.a.createElement("th",null,"Bought Price"),r.a.createElement("th",null,"Sold Date"),r.a.createElement("th",null,"Sold Price"),r.a.createElement("th",null,"Units"),r.a.createElement("th",null,"P/&L"))),r.a.createElement("tbody",null,this.mapResultList()))}},{key:"_renderSearchButton",value:function(){return r.a.createElement(_.a,{id:"btSearchBtn"},"Search")}},{key:"_renderResetButton",value:function(){return r.a.createElement(_.a,{id:"btResetBtn"},"Reset")}},{key:"_runBacktest",value:function(e){var t=this,a=this.state.selectedStrategy.strategy_buy,n=this.state.selectedStrategy.strategy_sell,r={from:this.state.dateFrom,to:this.state.dateTo};E.a.post("".concat(v,"back_test/test/"),{stockList:e,buyStrategy:a,sellStrategy:n,dateRange:r}).then((function(e){e.data&&(t.setState({result:e.data}),t._saveTransactionHistory(e.data))})).catch((function(e){return console.error(e)}))}},{key:"_saveTransactionHistory",value:function(e){E.a.post("".concat(v,"transaction_history/add"),{transactionList:e}).then((function(e){return console.log(e.data)})).catch((function(e){return console.error(e)}))}}]),a}(n.Component)),z=(a(94),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"trader-textfield"},r.a.createElement("span",null,this.props.label),r.a.createElement("input",{type:"text",onChange:this.props.onChange}))}}]),a}(n.Component)),G=(a(95),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFromDayChange=function(e){n.setState({fromDay:e})},n.handleToDayChange=function(e){n.setState({toDay:e})},n._processBacktest=function(){var e=n.state.selectedStock.value;E.a.post("".concat(v,"stocks/range/"),{dateFrom:n.state.fromDay,dateTo:n.state.toDay,code:e}).then((function(e){0!==e.data.length&&n._runBacktest(e.data)})).catch((function(e){return console.error(e)}))},n.stopLossChange=n.stopLossChange.bind(Object(w.a)(n)),n.handleStockChange=n.handleStockChange.bind(Object(w.a)(n)),n.handleStrategyChange=n.handleStrategyChange.bind(Object(w.a)(n)),n.state={fromDay:void 0,result:[],selectedStock:void 0,stockList:[],strategies:[],stopLoss:100,toDay:void 0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.retrieveStrategyList(),this.retrieveStockList()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("p",null,"LABORATORY")),r.a.createElement("div",{id:"tsBody"},this._renderTestPanel(),this._renderResultPanel()))}},{key:"_renderTestPanel",value:function(){var e=this;return r.a.createElement("div",{id:"testPanel"},r.a.createElement("div",{className:"testRunnerControls"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"testRunnerFields"},this._renderFromDatePicker(),this._renderToDatePicker(),this._renderSelectStock(),this._renderSelectStrategy(),this._renderStopLoss())),r.a.createElement("div",{className:"testRunnerActions"},r.a.createElement(_.a,{id:"trSearchBtn",onClick:function(){return e._processBacktest()}},"Start"),r.a.createElement(_.a,{id:"trResetBtn"},"Reset"))),r.a.createElement("div",{id:"tsResults"},this._renderResultsTable()),0!==this.state.result.length&&r.a.createElement("div",{id:"tsFooter"},this._renderPagination(),this._renderTestActions()))}},{key:"_renderResultPanel",value:function(){return r.a.createElement("div",null,"TEST RESULTS")}},{key:"_renderSelectStock",value:function(){var e=this.state.selectedStock;return r.a.createElement("div",{id:"tsStockDd"},r.a.createElement("span",null,"Stock"),r.a.createElement("div",{className:"dropdown"},r.a.createElement(M.a,{onChange:this.handleStockChange,options:this.state.stockList,value:e})))}},{key:"handleStockChange",value:function(e){this.setState({selectedStock:e})}},{key:"handleStrategyChange",value:function(e){this.setState({selectedStrategy:e})}},{key:"_renderSelectStrategy",value:function(){var e=this.state.selectedStrategy;return r.a.createElement("div",{id:"tsStratDd"},r.a.createElement("span",null,"Strategy"),r.a.createElement("div",{className:"dropdown"},r.a.createElement(M.a,{onChange:this.handleStrategyChange,options:this.state.strategies,value:e})))}},{key:"_renderFromDatePicker",value:function(){return r.a.createElement(P,{label:"From",onDayChange:this.handleFromDayChange})}},{key:"_renderToDatePicker",value:function(){return r.a.createElement(P,{label:"To",onDayChange:this.handleToDayChange})}},{key:"_renderStopLoss",value:function(){return r.a.createElement(z,{label:"Stoploss",onChange:this.stopLossChange})}},{key:"stopLossChange",value:function(e){this.setState({stopLoss:e.target.value})}},{key:"retrieveStrategyList",value:function(){var e=this;E.a.get("".concat(v,"strategy/")).then((function(t){return e.setState({strategies:t.data.map((function(e){return{label:e.strategy_name,value:e}}))})})).catch((function(e){return console.log(e)}))}},{key:"retrieveStockList",value:function(){var e=this;E.a.post("".concat(v,"stocks/distinct/")).then((function(t){return e.setState({stockList:t.data.map((function(e){return{label:e,value:e}}))})})).catch((function(e){return console.log(e)}))}},{key:"_runBacktest",value:function(e){var t=this,a=this.state.selectedStrategy.value.strategy_buy,n=this.state.selectedStrategy.value.strategy_sell,r=this.state.stopLoss;E.a.post("".concat(v,"back_test/test/"),{stockList:e,buyStrategy:a,sellStrategy:n,stopLoss:r}).then((function(e){e.data&&(t.setState({result:e.data}),t._saveTransactionHistory(e.data))})).catch((function(e){return console.error(e)}))}},{key:"_saveTransactionHistory",value:function(e){E.a.post("".concat(v,"transaction_history/add"),{transactionList:e}).then((function(e){return console.log(e.data)})).catch((function(e){return console.error(e)}))}},{key:"_renderResultsTable",value:function(){return 0!==this.state.result.length&&r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Code"),r.a.createElement("th",null,"Bought Date"),r.a.createElement("th",null,"Bought Price"),r.a.createElement("th",null,"Sold Date"),r.a.createElement("th",null,"Sold Price"),r.a.createElement("th",null,"Units"),r.a.createElement("th",null,"P/&L"),r.a.createElement("th",null,"Hold Days"))),r.a.createElement("tbody",null,this.mapResultList())))}},{key:"mapResultList",value:function(){var e=0;return this.state.result.map((function(t,a){for(e+=1;e>=0&&e<=999;){var n=U()(U()(t.bought_date).format("MMM DD, YYYY")),l=U()(U()(t.sold_date).format("MMM DD, YYYY"));return r.a.createElement("tr",{key:a},r.a.createElement("td",null," ",t.code," "),r.a.createElement("td",null," ",n._i," "),r.a.createElement("td",null," ",t.bought_price," "),r.a.createElement("td",null," ",l._i," "),r.a.createElement("td",null," ",t.sold_price," "),r.a.createElement("td",null," ",t.units," "),r.a.createElement("td",null," ",t.pnl&&t.pnl.toFixed(2)," "),r.a.createElement("td",null," ",l.diff(n,"days")," "))}}))}},{key:"_renderPagination",value:function(){return r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{href:"#",className:"page-link"},"1")),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{href:"#",className:"page-link"},"2")),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{href:"#",className:"page-link"},"3")),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{href:"#",className:"page-link"},"4")),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{href:"#",className:"page-link"},"5")))}},{key:"_renderTestActions",value:function(){return r.a.createElement("div",null,r.a.createElement(_.a,{id:"tsSave"},"Save"))}}]),a}(n.Component)),$=(a(96),a(97),function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"body-container"},this.renderSideNavigation(),this.renderContentArea()))}},{key:"renderTopHeader",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark",id:"topbar"}))}},{key:"renderSideNavigation",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar",id:"topbar left"}),r.a.createElement("nav",{id:"sidebar"},r.a.createElement("div",{id:"user"},r.a.createElement("img",{src:a(98),alt:"Avatar"}),r.a.createElement("span",null,"Carlo")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.b,{to:"/runner",className:"nav-link star",id:"newBacktest",onClick:this.resetActiveElements},r.a.createElement("span",{className:"title"},"New Backtest"),r.a.createElement("i",{className:"fas fa-plus fa-fw"}))),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/",className:"nav-link",id:"dashBoard",onClick:this.setToActive},r.a.createElement("i",{className:"fas fa-chart-pie fa-fw"}),r.a.createElement("span",{className:"title"},"Dashboard"))),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/stocks",className:"nav-link",id:"stockList",onClick:this.setToActive},r.a.createElement("i",{className:"fas fa-chart-line fa-fw"}),r.a.createElement("span",{className:"title"},"Stocks"))),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/strategy",className:"nav-link",id:"strategy",onClick:this.setToActive},r.a.createElement("i",{className:"fas fa-lightbulb fa-fw"}),r.a.createElement("span",{className:"title"},"Strategy"))),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/backtest",className:"nav-link",id:"backTest",onClick:this.setToActive},r.a.createElement("i",{className:"fas fa-vials fa-fw"}),r.a.createElement("span",{className:"title"},"Backtests"))))))}},{key:"setToActive",value:function(e){document.getElementsByClassName("active").length>=1&&document.getElementsByClassName("active")[0].classList.remove("active"),e.currentTarget.classList.add("active")}},{key:"resetActiveElements",value:function(){document.getElementsByClassName("active").length>0&&document.getElementsByClassName("active")[0].classList.remove("active")}},{key:"renderContentArea",value:function(){return r.a.createElement("div",{id:"content"},this.renderTopHeader(),r.a.createElement("div",{id:"body",className:"container-fluid"},r.a.createElement(m.b,{path:"/",exact:!0,component:h}),r.a.createElement(m.b,{path:"/strategy",exact:!0,component:B}),r.a.createElement(m.b,{path:"/stocks",exact:!0,component:W}),r.a.createElement(m.b,{path:"/backtest",exact:!0,component:J}),r.a.createElement(m.b,{path:"/runner",exact:!0,component:G})))}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.de3b3a81.chunk.js.map